<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      body {
        background-color:white;
      }
      ul {
        list-style-type: none;
        margin: 0;
        padding: 0;
        overflow: hidden;
        background-color: #38444d;
      }
      
      li {
        float: left;
      }
      
      li a, .dropbtn {
        display: inline-block;
        color: white;
        text-align: center;
        padding: 14px 16px;
        text-decoration: none;
      }
      
      li a:hover, .dropdown:hover .dropbtn {
        background-color: red;
      }
      
      li.dropdown {
        display: inline-block;
      }
      
      .dropdown-content {
        display: none;
        position: absolute;
        background-color: #f9f9f9;
        min-width: 160px;
        box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
        z-index: 1;
        right: 0;
        max-width: 25%;
      }
      
      .dropdown-content a {
        color: black;
        padding: 12px 16px;
        text-decoration: none;
        display: block;
        text-align: left;
      }
      
      .dropdown-content a:hover {background-color: #f1f1f1;}
      
      .show {
        display: block;
      }
    </style>
  </head>
  <body>
    <ul>
      <li><a href="#home">Home</a></li>
      <li><a href="#news">News</a></li>
      <li><a href="#contact">Contact</a></li>
      <li class="dropdown" style="float:right">
        <a class="dropbtn" href="javascript:void(0)" onclick="toggleDropdown()">Help</a>
        <div id="myDropdown" class="dropdown-content">
          <div id="lightningout"></div>
        </div>
      </li>
    </ul>

    <script src="https://icevonline.lightning.force.com/lightning/lightning.out.js"></script>
<script>
      function toggleDropdown() {
        document.getElementById("myDropdown").classList.toggle("show");
      }

      /*const queryString = window.location.search;
      const urlParams = new URLSearchParams(queryString);
      const userId = urlParams.get('userId')
      console.log('Html page: ' + userId);*/

      /*window.onclick = function(event) {
        // If the clicked element is not inside the dropdown
        const dropdown = document.querySelector('.dropdown');
        if (!dropdown.contains(event.target)) {
          document.getElementById("myDropdown").classList.remove("show");
        }
      }*/
      
 function hideCustomField(){
  const config = { attributes: true, childList: true, subtree: true };
  const callback = (mutationList, observer) => {
   var webWidget = document.getElementById('webWidget');
   if(webWidget !== null){
    const parser = new DOMParser();
    const doc = parser.parseFromString('<style>div:has(> input[name="key:32134460057236"]) { display: none; } </style>', 'text/html');
    const styleNode = doc.getElementsByTagName('style')[0];
    webWidget.contentDocument.head.appendChild(styleNode);
   }
  }
  const observer = new MutationObserver(callback);
  observer.observe(document, config);
 }
 hideCustomField();
 setTimeout(function(){
  let element = document.getElementById('launcher');
  if (element) {
   element.classList.add('d-print-none');
  }
 }, 250);
</script>
<!-- End of eduthings Zendesk Widget script -->
<!-- Start of sales force widget script -->
<script src="https://icevonline.lightning.force.com/lightning/lightning.out.js"></script>
<script>
 // const url = "https://icevonline.my.site.com/HelpCenter?districtUrl=<%= @district ? district_switcher_url(@district.id) : '' %>";
 const url = "https://icevonline.my.site.com/HelpCenter?districtUrl=<%= @district ? ERB::Util.url_encode(district_switcher_url(@district.id)) : '' %>";
 console.log(url)
 document.addEventListener('DOMContentLoaded', function() {
  function mountLightningComponent() {
   $Lightning.use(
    'c:LightningOutDependencyApp',
    function () {
     $Lightning.createComponent(
      'c:flowWrapper',
      {districtURL: "<%= @district ? district_switcher_url(@district.id) : '' %>"},
      'lightningout',
      function (cmp) {
        // callback when component is created and active on the page
       console.log(url)
      }
     );
    },
    url
   );
  }
   // If $Lightning is already loaded, mount immediately; otherwise, wait for script load
  if (window.$Lightning) {
   mountLightningComponent();
  } else {
   var script = document.createElement('script');
   script.src = 'https://icevonline.lightning.force.com/lightning/lightning.out.js';
   script.onload = function() {
    mountLightningComponent();
   };
   document.body.appendChild(script);
  }
 });
</script>
  </body>
</html>
